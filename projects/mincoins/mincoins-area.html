<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetBeans Area</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <!-- 
 
   
    
    The signs layout can be modified using the builder
   
    features:
    - walk with arrow keys or wasd
    - interact with signs using enter
    - type numbers on keyboard keys
    - run code with the run button
    - terminal shows mincoins program output

    -->
    <link rel="stylesheet" href="mincoins-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
</head>
<body>
    <canvas id="codeCanvas"></canvas>
    
    <!-- background music for mincoins -->
    <audio id="coinsMusic">
        <source src="../../sound-effects/COINS.mp3" type="audio/mpeg">
    </audio>
    
    <div class="instructions">
        <h3>NetBeans Area</h3>
        <p>↑↓←→ / WASD - Move</p>
        <p>Mouse - Look around</p>
        <p>Scroll - Zoom</p>
        <p style="margin-top: 10px; color: #ffd700;">Terminal Controls:</p>
        <p>Walk to Run button + ENTER - Start program</p>
        <p>Walk to number keys + ENTER - Input digits</p>
        <p>Walk to ENTER key - Submit input</p>
    </div>
    
    <button class="exit-btn" id="exitBtn">✕ Exit to Map</button>
    
    <!-- load the init script as a module with cache buster -->
    <script type="module" src="mincoins-init.js?v=2"></script>
    
    <!-- add exit functionality -->
    <script>
        document.getElementById('exitBtn').addEventListener('click', function() {
            // go back to main game
            window.location.href = '../../index.html';
        });
        
        // music control
        const coinsMusic = document.getElementById('coinsMusic');
        let playCount = 0;
        if (coinsMusic) {
            coinsMusic.volume = 0.3;
            // play twice only
            coinsMusic.addEventListener('ended', () => {
                playCount++;
                if (playCount < 2) {
                    coinsMusic.play();
                }
            });
            // start music on first interaction
            ['click', 'keydown'].forEach(e => {
                document.addEventListener(e, () => {
                    if (playCount === 0) {
                        coinsMusic.play().catch(err => console.log('Music error:', err));
                    }
                }, { once: true });
            });
        }
    </script>
</body>
</html>